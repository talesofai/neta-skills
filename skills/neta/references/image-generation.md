# 图片生成最佳实践

适用于 `make-image` 和 `remove-background` 命令。

---

## 提示词结构

**推荐格式：**
```
[主体描述] + [外观细节] + [服装/配饰] + [姿势/动作] + [背景/环境] + [光影/氛围] + [艺术风格]
```

**示例：**
```
一个 18 岁的魔法少女，粉色长发双马尾，金色眼眸，穿着粉色和白色相间的魔法裙装，
手持星形魔法杖，站立姿势，背景是星空和漂浮的魔法阵，柔和的粉色光晕，梦幻氛围，动漫风格
```

---

## 提示词要素对照表

| 要素 | 说明 | 示例 |
|------|------|------|
| 主体 | 明确角色/物体 | "一个女孩"、"一只猫" |
| 年龄 | 指定年龄段 | "18 岁"、"年轻的"、"成熟的" |
| 发型 | 颜色 + 样式 | "粉色长发双马尾"、"黑色短发" |
| 眼睛 | 颜色 + 特征 | "金色眼眸"、"蓝色大眼睛" |
| 服装 | 款式 + 颜色 | "粉色魔法裙装"、"黑色西装" |
| 配饰 | 道具/装饰 | "星形魔法杖"、"项链" |
| 姿势 | 动作/姿态 | "站立"、"坐着"、"跳跃" |
| 背景 | 环境描述 | "星空"、"教室"、"森林" |
| 光影 | 光线效果 | "柔和光晕"、"逆光" |
| 氛围 | 情感基调 | "梦幻"、"神秘"、"欢快" |
| 风格 | 艺术风格 | "动漫风格"、"写实"、"水彩" |

---

## 宽高比选择

| 比例 | 分辨率 | 适用场景 |
|------|--------|----------|
| `1:1` | 512×512 | 头像、图标、方形展示图 |
| `3:4` | 576×768 | **默认推荐**，社交媒体竖图、海报 |
| `4:3` | 768×576 | 横版插图、演示文稿 |
| `9:16` | 576×1024 | 手机壁纸、短视频封面、Stories |
| `16:9` | 1024×576 | 视频封面、横幅、桌面壁纸 |

---

## 常见用例

### 角色立绘

```bash
npm start make-image \
  -p "一个穿着校服的日本女高中生，黑色长发，红色蝴蝶结，站在教室门口，阳光从窗户洒进来，清新自然" \
  -a "3:4"
```

### 三视图设定

```bash
# 正面
npm start make-image -p "角色名，正面视图，白色背景，全身像" -a "3:4"

# 侧面
npm start make-image -p "角色名，侧面视图，白色背景，全身像" -a "3:4"

# 背面
npm start make-image -p "角色名，背面视图，白色背景，全身像" -a "3:4"
```

### 表情集

```bash
npm start make-image -p "角色名，开心表情，特写，白色背景" -a "1:1"
npm start make-image -p "角色名，生气表情，特写，白色背景" -a "1:1"
npm start make-image -p "角色名，惊讶表情，特写，白色背景" -a "1:1"
npm start make-image -p "角色名，害羞表情，特写，白色背景" -a "1:1"
```

### 去背景（抠图）

```bash
# 1. 先生成图片
result=$(npm start make-image -p "一个角色，白色背景")

# 2. 提取 artifact UUID
uuid=$(echo $result | jq -r '.artifacts[0].uuid')

# 3. 移除背景
npm start remove-background -i "$uuid"
```

---

## 提示词对比

### ❌ 过于简单
```
一个女孩
```

### ✅ 详细具体
```
一个 18 岁的魔法少女，粉色长发双马尾，金色眼眸，穿着粉色和白色相间的魔法裙装，
手持星形魔法杖，站立姿势，背景是星空和漂浮的魔法阵，柔和的粉色光晕，梦幻氛围，动漫风格
```

### ❌ 风格混杂
```
一个女孩，写实风格，动漫背景，水彩效果，3D 渲染
```

### ✅ 风格统一
```
一个女孩，动漫风格，赛璐璐上色，清晰的线条，明亮的色彩
```

---

## 常见问题

### Q: 生成结果不符合预期怎么办？

**A:** 逐步调整提示词：
1. 增加具体细节描述
2. 明确艺术风格
3. 简化过于复杂的场景
4. 尝试不同的宽高比

### Q: 人物脸部崩坏怎么办？

**A:** 
1. 避免过于复杂的表情描述
2. 不要同时描述多个动作
3. 尝试添加"精致的面部特征"等描述
4. 使用特写构图（在提示词中强调"面部特写"）

### Q: 如何保持角色一致性？

**A:**
1. 使用固定的角色特征描述
2. 保存成功的提示词模板
3. 先查询角色详情获取标准描述
   ```bash
   npm start request-character -n "角色名"
   ```
4. 基于角色描述生成提示词

---

## 相关文档

- [视频生成](./video-generation.md) - 将图片转换为动态视频
- [角色查询](./character-search.md) - 获取角色标准信息
